<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>√âditeur + Web int√©gr√©</title>
  <style>
    :root {
      --bg: #0b1020;
      --bg-alt: #12172a;
      --accent: #ffb300;
      --accent-soft: rgba(255, 179, 0, 0.16);
      --text: #f5f5f5;
      --muted: #9ca3af;
      --border: #1f2933;
      --danger: #f97373;
      --radius-lg: 14px;
      --radius-md: 10px;
      --radius-sm: 6px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.55);
      --shadow-subtle: 0 0 0 1px rgba(255, 255, 255, 0.02);
      --blur: 18px;
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      --transition-fast: 0.16s ease-out;
      --transition-med: 0.22s ease-out;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%);
      color: var(--text);
      font-family: var(--font-sans);
      -webkit-font-smoothing: antialiased;
    }

    body {
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 20px;
    }

    .app-shell {
      width: 100%;
      max-width: 1300px;
      height: 100%;
      max-height: 780px;
      border-radius: 22px;
      background: radial-gradient(circle at 0 0, rgba(255, 179, 0, 0.12), transparent 60%),
                  radial-gradient(circle at 100% 0, rgba(56, 189, 248, 0.12), transparent 55%),
                  rgba(4, 7, 23, 0.9);
      backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-soft), var(--shadow-subtle);
      padding: 16px 18px 18px;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(148, 163, 184, 0.24);
      position: relative;
      overflow: hidden;
    }

    .app-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        linear-gradient(120deg, rgba(255, 255, 255, 0.12), transparent 65%),
        radial-gradient(circle at top, rgba(255, 255, 255, 0.12), transparent 60%);
      mix-blend-mode: soft-light;
      opacity: 0.2;
      pointer-events: none;
    }

    .app-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .titlebar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 10px;
    }

    .titlebar-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .traffic-lights {
      display: flex;
      gap: 6px;
    }

    .traffic-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255, 255, 255, 0)) border-box;
      position: relative;
    }

    .traffic-dot::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      mix-blend-mode: soft-light;
    }

    .traffic-dot.red {
      background-color: #ff5f57;
    }

    .traffic-dot.amber {
      background-color: #febc2e;
    }

    .traffic-dot.green {
      background-color: #28c840;
    }

    .app-title {
      font-weight: 600;
      letter-spacing: 0.03em;
      font-size: 13px;
      text-transform: uppercase;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title-pill {
      font-size: 11px;
      color: var(--accent);
      background: rgba(180, 83, 9, 0.24);
      border-radius: 999px;
      padding: 2px 8px;
      border: 1px solid rgba(248, 250, 252, 0.1);
    }

    .titlebar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.16), transparent 60%),
                  linear-gradient(135deg, rgba(15, 23, 42, 0.6), rgba(15, 23, 42, 0.95));
      border: 1px solid rgba(148, 163, 184, 0.55);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.75);
      backdrop-filter: blur(12px);
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #22c55e, #166534);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
    }

    .main {
      flex: 1;
      display: flex;
      gap: 14px;
      min-height: 0;
    }

    .left-pane,
    .right-pane {
      background: radial-gradient(circle at top left, rgba(255, 179, 0, 0.08), transparent 60%),
                  linear-gradient(145deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.9));
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 14px 38px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.42);
      display: flex;
      flex-direction: column;
      min-height: 0;
      position: relative;
      overflow: hidden;
    }

    .left-pane {
      flex: 1.4;
    }

    .right-pane {
      flex: 1;
    }

    .right-pane::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.16), transparent 65%);
      opacity: 0.7;
      pointer-events: none;
    }

    .pane-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .tabs {
      display: flex;
      gap: 6px;
      padding: 2px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.08), transparent 70%);
      border: 1px solid rgba(148, 163, 184, 0.55);
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.95);
      align-self: flex-start;
      margin-bottom: 10px;
      position: relative;
    }

    .tab {
      position: relative;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: color var(--transition-fast), transform var(--transition-fast), opacity var(--transition-fast);
      z-index: 1;
      white-space: nowrap;
    }

    .tab-icon {
      font-size: 13px;
    }

    .tab-active-indicator {
      position: absolute;
      top: 2px;
      bottom: 2px;
      width: 50%;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.7), transparent 55%),
                  linear-gradient(135deg, #1f2937, #020617);
      box-shadow: 0 12px 20px rgba(15, 23, 42, 0.9);
      transform: translateX(0%);
      transition: transform var(--transition-med);
    }

    .tab.active {
      color: #e5e7eb;
      text-shadow: 0 0 12px rgba(255, 255, 255, 0.55);
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 8px;
      gap: 8px;
    }

    .status-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, var(--accent), #b45309);
      box-shadow: 0 0 0 4px rgba(250, 204, 21, 0.2);
    }

    .status-right {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .status-pill {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.95));
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-pill-key {
      font-size: 10px;
      padding: 2px 5px;
      border-radius: 4px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.85);
      color: #e5e7eb;
      letter-spacing: 0.06em;
    }

    .editor-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 6px;
      border-radius: 12px;
      background: radial-gradient(circle at top, rgba(148, 163, 184, 0.2), transparent 70%),
                  linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(148, 163, 184, 0.75);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
      align-items: center;
    }

    .toolbar-group {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(30, 64, 175, 0.5);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.6);
    }

    .toolbar-button {
      border-radius: 999px;
      border: none;
      background: transparent;
      color: #e5e7eb;
      padding: 5px 9px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      transition: background var(--transition-fast), color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
      position: relative;
    }

    .toolbar-button span {
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .toolbar-button:hover {
      background: radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.12), transparent 70%);
      transform: translateY(-0.5px);
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.7);
    }

    .toolbar-button.primary {
      background: radial-gradient(circle at 0 0, rgba(250, 250, 250, 0.65), transparent 55%),
                  linear-gradient(135deg, #f59e0b, #b45309);
      color: #111827;
      font-weight: 600;
      box-shadow: 0 12px 20px rgba(251, 191, 36, 0.45);
    }

    .toolbar-button.primary:hover {
      box-shadow: 0 14px 26px rgba(251, 191, 36, 0.6);
      transform: translateY(-1px);
    }

    .toolbar-button-icon {
      font-size: 14px;
    }

    .toolbar-divider {
      width: 1px;
      height: 22px;
      background: linear-gradient(to bottom, transparent, rgba(148, 163, 184, 0.8), transparent);
      margin: 0 2px;
    }

    .toolbar-select {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98));
      color: #e5e7eb;
      padding: 3px 9px;
      font-size: 12px;
      cursor: pointer;
    }

    .editor {
      flex: 1;
      border-radius: 14px;
      background: radial-gradient(circle at top left, rgba(248, 250, 252, 0.1), transparent 65%),
                  linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.65);
      padding: 14px;
      overflow: auto;
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.95), 0 12px 30px rgba(15, 23, 42, 0.95);
      position: relative;
    }

    .editor[contenteditable="true"]:empty::before {
      content: "Commence √† √©crire ici‚Ä¶";
      color: rgba(148, 163, 184, 0.85);
    }

    .editor:focus-visible {
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(250, 204, 21, 0.75), 0 0 0 1px rgba(250, 204, 21, 0.5),
                  0 16px 36px rgba(250, 204, 21, 0.2);
    }

    .editor-content {
      font-size: 14px;
      line-height: 1.6;
      color: #e5e7eb;
      min-height: 100%;
    }

    .web-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .web-search-bar {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px;
      border-radius: 12px;
      background: radial-gradient(circle at top, rgba(148, 163, 184, 0.22), transparent 70%),
                  linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(148, 163, 184, 0.8);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
    }

    .web-search-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.97);
      color: #e5e7eb;
      padding: 7px 11px;
      font-size: 13px;
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .web-search-input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .web-search-input:focus {
      border-color: rgba(250, 204, 21, 0.9);
      box-shadow: 0 0 0 1px rgba(250, 204, 21, 0.7);
    }

    .web-button {
      border-radius: 999px;
      border: none;
      background: radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.7), transparent 55%),
                  linear-gradient(135deg, #22c55e, #15803d);
      color: #022c22;
      font-weight: 600;
      padding: 7px 14px;
      font-size: 12px;
      cursor: pointer;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      box-shadow: 0 12px 22px rgba(34, 197, 94, 0.5);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .web-button:hover {
      box-shadow: 0 14px 26px rgba(34, 197, 94, 0.7);
      transform: translateY(-1px);
    }

    .web-iframe-wrapper {
      flex: 1;
      border-radius: 14px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.7);
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.95);
      position: relative;
    }

    .web-iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: #020617;
    }

    .web-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 13px;
      color: rgba(148, 163, 184, 0.9);
      pointer-events: none;
      text-align: center;
      padding: 0 20px;
    }

    .web-placeholder-title {
      font-size: 14px;
      font-weight: 500;
      color: #e5e7eb;
    }

    .web-placeholder-badge {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.92);
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .assistant-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 8px;
    }

    .assistant-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .assistant-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .assistant-messages {
      flex: 1;
      border-radius: 14px;
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.4), transparent 55%),
                  linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(56, 189, 248, 0.9);
      padding: 10px;
      overflow-y: auto;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.98);
      font-size: 13px;
    }

    .assistant-message {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .assistant-message.user {
      text-align: right;
      color: #f9fafb;
    }

    .assistant-message.assistant {
      color: #e0f2fe;
    }

    .assistant-input-row {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .assistant-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.97);
      color: #e5e7eb;
      padding: 7px 11px;
      font-size: 13px;
      outline: none;
    }

    .assistant-input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .assistant-button {
      border-radius: 999px;
      border: none;
      background: radial-gradient(circle at 0 0, rgba(248, 250, 252, 0.75), transparent 55%),
                  linear-gradient(135deg, #38bdf8, #0369a1);
      color: #02131d;
      font-weight: 600;
      padding: 7px 10px;
      font-size: 12px;
      cursor: pointer;
      box-shadow: 0 10px 22px rgba(56, 189, 248, 0.55);
      display: flex;
      align-items: center;
      gap: 4px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .assistant-button:hover {
      box-shadow: 0 12px 26px rgba(56, 189, 248, 0.7);
      transform: translateY(-1px);
    }

    .assistant-footer {
      font-size: 10px;
      color: rgba(148, 163, 184, 0.9);
      text-align: right;
      margin-top: 3px;
    }

    .hint {
      font-size: 11px;
      color: rgba(148, 163, 184, 0.9);
      margin-top: 5px;
    }

    .hint strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    @media (max-width: 1100px) {
      .app-shell {
        max-height: none;
        height: 100%;
      }
      .main {
        flex-direction: column;
      }
      .left-pane,
      .right-pane {
        flex: none;
        min-height: 260px;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 8px;
      }
      .app-shell {
        padding: 10px;
        border-radius: 18px;
      }
      .titlebar {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }
      .badge {
        display: none;
      }
      .toolbar {
        justify-content: flex-start;
      }
      .titlebar-right {
        font-size: 10px;
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="app-inner">
      <div class="titlebar">
        <div class="titlebar-left">
          <div class="traffic-lights">
            <div class="traffic-dot red"></div>
            <div class="traffic-dot amber"></div>
            <div class="traffic-dot green"></div>
          </div>
          <div class="app-title">
            Atelier d‚Äô√©criture
            <span class="app-title-pill">√âditeur + Web int√©gr√©</span>
          </div>
        </div>
        <div class="titlebar-right">
          <span>Local ‚Ä¢ Sans compte ‚Ä¢ Navigateur</span>
          <span>FR</span>
          <div class="badge">
            <span class="badge-dot"></span>
            <span>Session priv√©e</span>
          </div>
        </div>
      </div>

      <div class="main">
        <div class="left-pane">
          <div class="pane-inner">
            <div class="tabs" id="tabs">
              <div class="tab-active-indicator" id="tab-indicator"></div>
              <button class="tab active" data-tab="editor">
                <span class="tab-icon">‚úèÔ∏è</span>
                <span>√âditeur</span>
              </button>
              <button class="tab" data-tab="web">
                <span class="tab-icon">üåê</span>
                <span>Web</span>
              </button>
            </div>

            <div class="status-bar">
              <div class="status-left">
                <div class="status-dot"></div>
                <span>Texte + navigation, tout dans la m√™me fen√™tre.</span>
              </div>
              <div class="status-right">
                <span class="status-pill">
                  <span class="status-pill-key">Ctrl</span> + <span class="status-pill-key">S</span>
                  <span>Dupliquer le texte</span>
                </span>
              </div>
            </div>

            <div class="editor-container" id="editor-view">
              <div class="toolbar">
                <div class="toolbar-group">
                  <button class="toolbar-button" data-command="bold">
                    <span class="toolbar-button-icon">B</span>
                    <span>Gras</span>
                  </button>
                  <button class="toolbar-button" data-command="italic">
                    <span class="toolbar-button-icon">I</span>
                    <span>Italique</span>
                  </button>
                  <button class="toolbar-button" data-command="underline">
                    <span class="toolbar-button-icon">U</span>
                    <span>Soulign√©</span>
                  </button>
                </div>

                <div class="toolbar-group">
                  <select class="toolbar-select" id="font-size-select">
                    <option value="">Taille</option>
                    <option value="3">Normal</option>
                    <option value="4">+</option>
                    <option value="5">++</option>
                  </select>
                  <div class="toolbar-divider"></div>
                  <button class="toolbar-button" data-command="insertUnorderedList">
                    <span class="toolbar-button-icon">‚Ä¢</span>
                    <span>Liste</span>
                  </button>
                  <button class="toolbar-button" data-command="justifyLeft">
                    <span class="toolbar-button-icon">‚â°</span>
                    <span>Gauche</span>
                  </button>
                  <button class="toolbar-button" data-command="justifyCenter">
                    <span class="toolbar-button-icon">‚â£</span>
                    <span>Centre</span>
                  </button>
                </div>

                <div class="toolbar-group">
                  <button class="toolbar-button primary" id="copy-text">
                    <span class="toolbar-button-icon">‚ßâ</span>
                    <span>Copier</span>
                  </button>
                </div>
              </div>

              <div class="editor" id="editor" contenteditable="true">
                <div class="editor-content">
                  <p>Bienvenue. Utilise l‚Äôonglet <strong>Web</strong> pour ouvrir des pages internet directement ici, sans changer d‚Äôonglet.</p>
                  <p>Dans la barre en haut de l‚Äôonglet Web, tu peux saisir une <strong>URL</strong> (par exemple <em>https://fr.wikipedia.org</em>) ou simplement des <strong>mots-cl√©s</strong> (par exemple <em>latex dungeon</em>) et la page s‚Äôaffichera en dessous.</p>
                </div>
              </div>
              <div class="hint">
                <strong>Astuce :</strong> tu peux garder un texte ouvert √† gauche et une page Web √† droite pour √©crire en parall√®le.
              </div>
            </div>

            <div class="web-container" id="web-view" style="display:none;">
              <div class="web-search-bar">
                <input
                  type="text"
                  id="web-input"
                  class="web-search-input"
                  placeholder="Tape une URL (https://...) ou une recherche (ex : latex dungeon)‚Ä¶"
                />
                <button class="web-button" id="web-go">
                  <span>Ouvrir</span>
                </button>
              </div>
              <div class="web-iframe-wrapper">
                <iframe id="web-frame" class="web-iframe"></iframe>
                <div class="web-placeholder" id="web-placeholder">
                  <div class="web-placeholder-title">Aucune page charg√©e pour l‚Äôinstant</div>
                  <div>Entre une adresse ou une recherche dans la barre ci-dessus, puis appuie sur Entr√©e ou ‚ÄúOuvrir‚Äù.</div>
                  <div class="web-placeholder-badge">Tout s‚Äôouvre directement ici</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="right-pane">
          <div class="pane-inner">
            <div class="assistant-header">
              <div class="assistant-title">
                <span>Assistant de travail</span>
              </div>
            </div>
            <div class="assistant-body">
              <div class="assistant-messages" id="assistant-messages">
                <div class="assistant-message assistant">
                  Pose une question sur ton texte, demande une reformulation, ou note une id√©e rapide. Tout reste dans cette fen√™tre.
                </div>
              </div>
              <div class="assistant-input-row">
                <input
                  type="text"
                  id="assistant-input"
                  class="assistant-input"
                  placeholder="Note, question, id√©e‚Ä¶ (simulation d‚Äôassistant local)"
                />
                <button class="assistant-button" id="assistant-send">
                  <span>Envoyer</span>
                </button>
              </div>
              <div class="assistant-footer">
                R√©ponses simul√©es pour l‚Äôinstant (pas de connexion serveur).
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll(".tab");
    const tabIndicator = document.getElementById("tab-indicator");
    const editorView = document.getElementById("editor-view");
    const webView = document.getElementById("web-view");

    function updateTabIndicator(activeIndex) {
      if (!tabIndicator) return;
      const percentage = activeIndex * 100;
      tabIndicator.style.transform = "translateX(" + percentage + "%)";
    }

    tabs.forEach((tab, index) => {
      tab.addEventListener("click", () => {
        tabs.forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");
        updateTabIndicator(index);
        const target = tab.getAttribute("data-tab");
        if (target === "editor") {
          editorView.style.display = "";
          webView.style.display = "none";
        } else {
          editorView.style.display = "none";
          webView.style.display = "";
        }
      });
    });

    updateTabIndicator(0);

    const toolbarButtons = document.querySelectorAll(".toolbar-button[data-command]");
    const editor = document.getElementById("editor");
    const fontSizeSelect = document.getElementById("font-size-select");

    toolbarButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const command = button.getAttribute("data-command");
        document.execCommand(command, false, null);
        editor.focus();
      });
    });

    fontSizeSelect.addEventListener("change", () => {
      const size = fontSizeSelect.value;
      if (size) {
        document.execCommand("fontSize", false, size);
        editor.focus();
      }
    });

    const copyButton = document.getElementById("copy-text");
    copyButton.addEventListener("click", () => {
      const selection = window.getSelection();
      const range = document.createRange();
      range.selectNodeContents(editor);
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand("copy");
        selection.removeAllRanges();
        copyButton.querySelector("span:nth-child(2)").textContent = "Copi√© !";
        setTimeout(() => {
          copyButton.querySelector("span:nth-child(2)").textContent = "Copier";
        }, 1000);
      } catch (err) {}
    });

    document.addEventListener("keydown", (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "s") {
        e.preventDefault();
        copyButton.click();
      }
    });

    const webInput = document.getElementById("web-input");
    const webGo = document.getElementById("web-go");
    const webFrame = document.getElementById("web-frame");
    const webPlaceholder = document.getElementById("web-placeholder");

    function buildUrlFromInput(value) {
      const trimmed = value.trim();
      if (!trimmed) return null;

      const hasSpace = /\s/.test(trimmed);
      const looksLikeUrl =
        /^https?:\/\//i.test(trimmed) ||
        /^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(trimmed);

      if (looksLikeUrl) {
        if (!/^https?:\/\//i.test(trimmed)) {
          return "https://" + trimmed;
        }
        return trimmed;
      }

      const encoded = encodeURIComponent(trimmed);
      return "https://duckduckgo.com/?q=" + encoded + "&ia=web";
    }

    function openInWebFrame() {
      const value = webInput.value;
      const url = buildUrlFromInput(value);
      if (!url) return;
      webFrame.src = url;
      if (webPlaceholder) {
        webPlaceholder.style.display = "none";
      }
    }

    webGo.addEventListener("click", openInWebFrame);

    webInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        openInWebFrame();
      }
    });

    const assistantInput = document.getElementById("assistant-input");
    const assistantSend = document.getElementById("assistant-send");
    const assistantMessages = document.getElementById("assistant-messages");

    function addAssistantMessage(text, role) {
      const div = document.createElement("div");
      div.className = "assistant-message " + role;
      div.textContent = text;
      assistantMessages.appendChild(div);
      assistantMessages.scrollTop = assistantMessages.scrollHeight;
    }

    assistantSend.addEventListener("click", () => {
      const text = assistantInput.value.trim();
      if (!text) return;
      addAssistantMessage(text, "user");
      assistantInput.value = "";
      setTimeout(() => {
        addAssistantMessage(
          "R√©ponse simul√©e : je note ‚Äî √† relier √† un v√©ritable assistant plus tard.",
          "assistant"
        );
      }, 400);
    });

    assistantInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        assistantSend.click();
      }
    });
  </script>
</body>
</html>
